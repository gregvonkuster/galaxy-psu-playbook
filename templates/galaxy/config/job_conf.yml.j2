---

#
# Job runner plugin configuration
#
runners:
  local:
    load: galaxy.jobs.runners.local:LocalJobRunner
    workers: 2
  slurm:
    load: galaxy.jobs.runners.slurm:SlurmJobRunner
    workers: 4
    drmaa_library_path: /usr/lib/slurm-drmaa/lib/libdrmaa.so.1
    invalidjobexception_retries: 5
    internalexception_retries: 5
  frontera:
    load: galaxy.jobs.runners.pulsar:PulsarMQJobRunner
    manager: frontera
    amqp_url: "{{ pulsar_message_queue_url }}"
    galaxy_url: "https://{{ galaxy_instance_hostname }}"
    persistence_directory: "{{ galaxy_root }}/var/pulsar_amqp_ack"
    amqp_acknowledge: true
    amqp_ack_republish_time: 1200
    amqp_consumer_timeout: 2.0
    amqp_publish_retry: true
    amqp_publish_retry_max_retries: 60


handling:
  assign:
    - db-skip-locked
  max_grab: 16
  ready_window_size: 32

execution:
  default: slurm_normal_container
  environments:
    local:
      runner: local
    tpv_dispatcher:
      runner: dynamic
      type: python
      function: map_tool_to_destination
      rules_module: tpv.rules
      tpv_config_files:
        - https://raw.githubusercontent.com/galaxyproject/tpv-shared-database/main/tools.yml
        - "{{ galaxy_dynamic_job_rules_dir }}/total_perspective_vortex/default_tool.yml"
        - "{{ galaxy_dynamic_job_rules_dir }}/total_perspective_vortex/tools.yml"
        - "{{ galaxy_dynamic_job_rules_dir }}/total_perspective_vortex/destinations.yml"
    slurm:
      runner: slurm
      tmp_dir: True
      native_specification: --nodes=1 --ntasks=24 --ntasks-per-node=24 --mem=119896 --partition=normal
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
    frontera:
      runner: frontera
      submit_native_specification: --partition=small --nodes=1 --ntasks=56 --time=00:30:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx128g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - execute: ulimit -u 16384
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "194560"
    # single core, default (4GB) memory, non-container
    slurm_normal:
      runner: slurm
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    # single core, default (4GB) memory, singularity
    slurm_normal_container:
      runner: slurm
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    slurm_normal_container_resolv_fix:
      runner: slurm
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      singularity_run_extra_arguments: --no-mount=tmp
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    # default multi core (6), default (4GB) memory, singularity
    slurm_normal_multicore_container:
      runner: slurm
      tags: [multicore]
      native_specification: --ntasks=6 --mem=4000
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    # 4 cores, 8 GB memory, singularity
    slurm_normal_multicore_container_4c8g:
      runner: slurm
      tags: [multicore]
      native_specification: --ntasks=4 --mem=8000
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    # single core, large (32GB) memory, singularity
    slurm_bigmem_container:
      runner: slurm
      native_specification: --partition=bigmem
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    # single core, default (4GB) memory, singularity, galaxy venv (for tools that use galaxy lib)
    slurm_normal_container_venv:
      runner: slurm
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: SINGULARITYENV_PREPEND_PATH
          value: "{{ galaxy_venv_dir }}/bin"
    # default multi core (6), default (4GB) memory, singularity, galaxy venv (for tools that use galaxy lib)
    slurm_normal_multicore_container_venv:
      runner: slurm
      tags: [multicore]
      native_specification: --ntasks=6 --mem=4000
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: SINGULARITYENV_PREPEND_PATH
          value: "{{ galaxy_venv_dir }}/bin"
    # default multi core (6), default (64GB) memory, singularity, galaxy venv (for tools that use galaxy lib)
    slurm_bigmem_multicore_container_venv:
      runner: slurm
      tags: [multicore]
      native_specification: --ntasks=6 --mem=65536 --partition=bigmem
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      singularity_default_container_id: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: SINGULARITYENV_PREPEND_PATH
          value: "{{ galaxy_venv_dir }}/bin"
    # single core, default (4GB) memory, conda deps in singularity
    slurm_normal_container_conda:
      runner: slurm
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      container_override:
        - type: singularity
          shell: /bin/sh
          resolve_dependencies: true
          identifier: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    # single core, (8GB) memory, conda deps in singularity
    slurm_normal_container_conda_1c8g:
      runner: slurm
      native_specification: --ntasks=1 --mem=8000
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      container_override:
        - type: singularity
          shell: /bin/sh
          resolve_dependencies: true
          identifier: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    # multi core, default (4GB) memory, conda deps in singularity
    slurm_normal_multicore_container_conda:
      runner: slurm
      tags: [multicore]
      native_specification: --ntasks=6 --mem=4000
      singularity_enabled: true
      singularity_volumes: "{{ galaxy_job_conf_singularity_volumes | join(',') }}"
      outputs_to_working_directory: true
      container_override:
        - type: singularity
          shell: /bin/sh
          resolve_dependencies: true
          identifier: "/cvmfs/singularity.galaxyproject.org/all/python:3.9--1"
      env:
        - name: LC_ALL
          value: C
        - name: TMPDIR
          value: $_GALAXY_JOB_TMP_DIR
        - name: TMP
          value: $_GALAXY_JOB_TMP_DIR
        - name: TEMP
          value: $_GALAXY_JOB_TMP_DIR
    # Frontera via Pulsar
    frontera_development:
      runner: frontera
      submit_native_specification: --partition=development --nodes=1 --ntasks=56 --time=00:30:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx128g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - execute: ulimit -u 16384
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "194560"
    #### For testing
    frontera_small_2min:
      runner: frontera
      tags: [frontera_limit]
      submit_native_specification: --partition=small --nodes=1 --ntasks=56 --time=00:02:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx128g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - execute: ulimit -u 16384
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "194560"
    frontera_small_2hr:
      runner: frontera
      tags: [frontera_limit]
      submit_native_specification: --partition=small --nodes=1 --ntasks=56 --time=02:00:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx128g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "194560"
    frontera_small_4hr:
      runner: frontera
      tags: [frontera_limit]
      submit_native_specification: --partition=small --nodes=1 --ntasks=56 --time=04:00:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx128g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "194560"
    frontera_small_8hr:
      runner: frontera
      tags: [frontera_limit]
      submit_native_specification: --partition=small --nodes=1 --ntasks=56 --time=08:00:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx128g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "194560"
    frontera_large_10min:
      runner: frontera
      tags: [frontera_limit]
      submit_native_specification: --partition=nvdimm --nodes=1 --ntasks=112 --time=00:10:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx1792g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - execute: ulimit -u 16384
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "1966080"
    frontera_large_2hr:
      runner: frontera
      tags: [frontera_limit]
      submit_native_specification: --partition=nvdimm --nodes=1 --ntasks=112 --time=02:00:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx1792g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "1966080"
    frontera_large_8hr:
      runner: frontera
      tags: [frontera_limit]
      submit_native_specification: --partition=nvdimm --nodes=1 --ntasks=112 --time=08:00:00
      remote_metadata: false
      transport: curl
      default_file_action: remote_transfer
      dependency_resolution: remote
      rewrite_parameters: true
      file_action_config: {{ galaxy_config_dir }}/pulsar_frontera_actions.yml
      outputs_to_working_directory: false
      jobs_directory: "/scratch1/08500/{{ tacc_user }}/staging"
      singularity_enabled: true
      # the tacc-singularity module automatically sets up mounts
      singularity_volumes: null
      container_resolvers:
        - type: explicit_singularity
        - type: mulled_singularity
      require_container: true
      env:
        - name: _JAVA_OPTIONS
          value: $_JAVA_OPTIONS -Xmx1792g -Xms256m
        - name: LC_ALL
          value: C
        - name: TERM
          value: vt100
        - execute: ulimit -c 0
        - name: SINGULARITYENV__JAVA_OPTIONS
          value: $_JAVA_OPTIONS
        - name: SINGULARITYENV_LC_ALL
          value: $LC_ALL
        - name: SINGULARITYENV_TERM
          value: $TERM
        - file: /etc/profile.d/z01_lmod.sh
        - execute: module load tacc-singularity
        - execute: module unload xalt
        - name: GALAXY_SLOTS
          value: "$SLURM_NTASKS"
        - name: GALAXY_MEMORY_MB
          value: "1966080"

tools:
  # TODO: figure out how to make sure these do not run on Frontera.
  # param_value_from_file
  #__FILTER_FAILED_DATASETS__
  - id: upload1
    environment: slurm_normal
  - id: __DATA_FETCH__
    environment: slurm_normal
  - id: Cut1
    environment: slurm_normal
    container_override: [{type: singularity, shell: '/bin/sh', identifier: "/cvmfs/singularity.galaxyproject.org/all/perl:5.22.0--9"}]
  - id: Remove beginning1
    environment: slurm_normal
    container_override: [{type: singularity, shell: '/bin/sh', identifier: "/cvmfs/singularity.galaxyproject.org/all/perl:5.22.0--9"}]
  - id: addValue
    environment: slurm_normal
    container_override: [{type: singularity, shell: '/bin/sh', identifier: "/cvmfs/singularity.galaxyproject.org/all/perl:5.22.0--9"}]
  # Other than the data source tools, these should still be runnable in a container
  - class: local
    environment: slurm_normal
  # Tools using a single core that need to run in the venv.
  - id: __SET_METADATA__
    environment: slurm_normal_container_venv
  - id: ucsc_table_direct1
    environment: slurm_normal_container_venv
  # Tools using multiple cores that need to run in the venv.
  - id: ncbi_makeblastdb
    environment: slurm_bigmem_multicore_container_venv
  # Tools that do not have corresponding BioContainers
  #### TPV Dispatcher
  - id: collapse_dataset
    environment: tpv_dispatcher
  - id: vsnp_build_tables
    environment: frontera_large_8hr
  - id: vsnp_statistics
    environment: frontera_small_2hr
  - id: vsnp_add_zero_coverage
    environment: frontera_small_2hr
  - id: vsnp_get_snps
    environment: frontera_large_8hr
  - id: sample_names
    environment: frontera_small_2hr
  - id: seqkit_stats
    environment: frontera_small_2hr
  - id: seqkit_fx2tab
    environment: frontera_small_2hr
  - id: multiqc
    environment: frontera_small_4hr
  - id: raxml
    environment: frontera_large_8hr
  - id: bwa
    environment: tpv_dispatcher
  - id: bwa_mem
    environment: frontera_small_2hr
  - id: picard_MarkDuplicates
    environment: frontera_small_8hr
  - id: picard_RevertSam
    environment: tpv_dispatcher
  - id: picard_AddCommentsToBam
    environment: tpv_dispatcher
  - id: picard_AddOrReplaceReadGroups
    environment: tpv_dispatcher
  - id: picard_CollectInsertSizeMetrics
    environment: tpv_dispatcher
  - id: picard_BedToIntervalList
    environment: tpv_dispatcher
  - id: picard_CollectHsMetrics
    environment: tpv_dispatcher
  - id: picard_CollectRnaSeqMetrics
    environment: tpv_dispatcher
  - id: picard_artifact_metrics
    environment: tpv_dispatcher
  - id: picard_CollectWgsMetrics
    environment: tpv_dispatcher
  - id: picard_QualityScoreDistribution
    environment: tpv_dispatcher
  - id: picard_FilterSamReads
    environment: tpv_dispatcher
  - id: picard_DownsampleSam
    environment: tpv_dispatcher
  - id: picard_FixMateInformation
    environment: tpv_dispatcher
  - id: picard_MarkDuplicatesWithMateCigar
    environment: tpv_dispatcher
  - id: picard_SamToFastq
    environment: tpv_dispatcher
  - id: picard_ReorderSam
    environment: tpv_dispatcher
  - id: picard_MeanQualityByCycle
    environment: tpv_dispatcher
  - id: picard_CollectGcBiasMetrics
    environment: tpv_dispatcher
  - id: picard_SortSam
    environment: tpv_dispatcher
  - id: picard_FastqToSam
    environment: tpv_dispatcher
  - id: picard_CollectBaseDistributionByCycle
    environment: tpv_dispatcher
  - id: picard_ReplaceSamHeader
    environment: tpv_dispatcher
  - id: picard_ValidateSamFile
    environment: tpv_dispatcher
  - id: picard_CASM
    environment: tpv_dispatcher
  - id: picard_MergeSamFiles
    environment: tpv_dispatcher
  - id: picard_EstimateLibraryComplexity
    environment: tpv_dispatcher
  - id: picard_CleanSam
    environment: tpv_dispatcher
  - id: picard_RevertOriginalBaseQualitiesAndAddMateCigar
    environment: tpv_dispatcher
  - id: picard_NormalizeFasta
    environment: tpv_dispatcher
  - id: picard_MergeBamAlignment
    environment: tpv_dispatcher
  - id: picard_RevertSam
    environment: tpv_dispatcher
  - id: picard_AddCommentsToBam
    environment: tpv_dispatcher
  - id: picard_AddOrReplaceReadGroups
    environment: tpv_dispatcher
  - id: picard_CollectInsertSizeMetrics
    environment: tpv_dispatcher
  - id: picard_BedToIntervalList
    environment: tpv_dispatcher
  - id: picard_CollectHsMetrics
    environment: tpv_dispatcher
  - id: picard_CollectRnaSeqMetrics
    environment: tpv_dispatcher
  - id: picard_artifact_metrics
    environment: tpv_dispatcher
  - id: picard_CollectWgsMetrics
    environment: tpv_dispatcher
  - id: picard_QualityScoreDistribution
    environment: tpv_dispatcher
  - id: picard_FilterSamReads
    environment: tpv_dispatcher
  - id: picard_DownsampleSam
    environment: tpv_dispatcher
  - id: picard_FixMateInformation
    environment: tpv_dispatcher
  - id: freebayes
    environment: frontera_small_8hr
  - id: samtools_idxstats
    environment: tpv_dispatcher
  - id: samtools_sort
    environment: tpv_dispatcher
  - id: fastqc
    environment: tpv_dispatcher
  - id: bionano_scaffold
    environment: tpv_dispatcher
  - id: ctb_chemfp_nxn_clustering
    environment: tpv_dispatcher
  - id: ctb_chemfp_mol2fps
    environment: tpv_dispatcher
  - id: ctb_sdf2fps
    environment: tpv_dispatcher
  - id: deeptools_bam_compare
    environment: tpv_dispatcher
  - id: deeptools_bam_coverage
    environment: tpv_dispatcher
  - id: deeptools_compute_matrix
    environment: tpv_dispatcher
  - id: deeptools_plot_heatmap
    environment: tpv_dispatcher
  - id: salmon
    environment: tpv_dispatcher
  - id: tp_sorted_uniq
    environment: tpv_dispatcher
  - id: tp_multijoin_tool
    environment: tpv_dispatcher
  - id: tp_unfold_column_tool
    environment: tpv_dispatcher
  - id: tp_sort_header_tool
    environment: tpv_dispatcher
  - id: tp_tac
    environment: tpv_dispatcher
  - id: tp_head_tool
    environment: tpv_dispatcher
  - id: tp_awk_tool
    environment: tpv_dispatcher
  - id: tp_sed_tool
    environment: tpv_dispatcher
  - id: tp_text_file_with_recurring_lines
    environment: tpv_dispatcher
  - id: tp_replace_in_column
    environment: tpv_dispatcher
  - id: tp_find_and_replace
    environment: tpv_dispatcher
  - id: tp_cut_tool
    environment: tpv_dispatcher
  - id: tp_sort_rows
    environment: tpv_dispatcher
  - id: tp_grep_tool
    environment: tpv_dispatcher
  - id: tp_easyjoin_tool
    environment: tpv_dispatcher
  - id: tp_uniq_tool
    environment: tpv_dispatcher
  - id: tp_cat
    environment: tpv_dispatcher
  - id: tp_tail_tool
    environment: tpv_dispatcher
  - id: tp_replace_in_line
    environment: tpv_dispatcher
  - id: trim_galore
    environment: tpv_dispatcher
  - id: clustalw
    environment: tpv_dispatcher
  - id: cuffmerge
    environment: tpv_dispatcher
  - id: fastq_paired_end_joiner
    environment: tpv_dispatcher
  - id: cshl_fastq_quality_filter
    environment: tpv_dispatcher
  - id: kraken
    environment: tpv_dispatcher
  - id: ncbi_blastn_wrapper
    environment: tpv_dispatcher
  - id: ncbi_blastp_wrapper
    environment: tpv_dispatcher
  - id: ncbi_blastx_wrapper
    environment: tpv_dispatcher
  - id: ncbi_tblastn_wrapper
    environment: tpv_dispatcher
  - id: ncbi_tblastx_wrapper
    environment: tpv_dispatcher
  - id: samtool_filter2
    environment: tpv_dispatcher
  - id: samtools_mpileup
    environment: tpv_dispatcher
  - id: mummer_nucmer
    environment: tpv_dispatcher
  - id: bam_to_psl
    environment: tpv_dispatcher
  - id: filter_contigs
    environment: tpv_dispatcher
  - id: p_chunks
    environment: tpv_dispatcher
  - id: maxquant
    environment: tpv_dispatcher
  - id: maxquant_mqpar
    environment: tpv_dispatcher
  - id: maxquant_mqpar
    environment: tpv_dispatcher
  - id: bcftools_mpileup
    environment: tpv_dispatcher
  - id: bcftools_call
    environment: tpv_dispatcher
  - id: bcftools_norm
    environment: tpv_dispatcher
  - id: bcftools_convert_to_vcf
    environment: tpv_dispatcher
  - id: bcftools_consensus
    environment: tpv_dispatcher
  - id: bcftools_plugin_fixploidy
    environment: tpv_dispatcher
  - id: bcftools_gtcheck
    environment: tpv_dispatcher
  - id: bcftools_stats
    environment: tpv_dispatcher
  - id: bcftools_convert_from_vcf
    environment: tpv_dispatcher
  - id: bcftools_view
    environment: tpv_dispatcher
  - id: bcftools_filter
    environment: tpv_dispatcher
  - id: bcftools_plugin_color_chrs
    environment: tpv_dispatcher
  - id: bcftools_plugin_frameshifts
    environment: tpv_dispatcher
  - id: bcftools_cnv
    environment: tpv_dispatcher
  - id: bcftools_plugin_missing2ref
    environment: tpv_dispatcher
  - id: bcftools_query_list_samples
    environment: tpv_dispatcher
  - id: cat_bins
    environment: tpv_dispatcher
  - id: circos_bundlelinks
    environment: tpv_dispatcher
  - id: datamash_ops
    environment: tpv_dispatcher
  - id: deseq2
    environment: tpv_dispatcher
  - id: edger
    environment: tpv_dispatcher
  - id: fasta-stats
    environment: tpv_dispatcher
  - id: draw_features
    environment: tpv_dispatcher
  - id: fastp
    environment: tpv_dispatcher
  - id: ggplot2_heatmap2
    environment: tpv_dispatcher
  - id: ggplot2_point
    environment: tpv_dispatcher
  - id: gubbins
    environment: tpv_dispatcher
  - id: jbrowse
    environment: tpv_dispatcher
  - id: kallisto_quant
    environment: tpv_dispatcher
  - id: kraken2
    environment: tpv_dispatcher
  - id: kraken2_build_database
    environment: tpv_dispatcher
  - id: limma_voom
    environment: tpv_dispatcher
  - id: lofreq_call
    environment: tpv_dispatcher
  - id: lofreq_indelqual
    environment: tpv_dispatcher
  - id: macs2_bdgdiff
    environment: tpv_dispatcher
  - id: macs2_callpeak
    environment: tpv_dispatcher
  - id: merqury
    environment: tpv_dispatcher
  - id: mothur_align_seqs
    environment: tpv_dispatcher
  - id: mothur_chimera_vsearch
    environment: tpv_dispatcher
  - id: mothur_classify_otu
    environment: tpv_dispatcher
  - id: mothur_classify_seqs
    environment: tpv_dispatcher
  - id: mothur_count_seqs
    environment: tpv_dispatcher
  - id: mothur_dist_shared
    environment: tpv_dispatcher
  - id: mothur_filter_seqs
    environment: tpv_dispatcher
  - id: mothur_make_contigs
    environment: tpv_dispatcher
  - id: mothur_make_group
    environment: tpv_dispatcher
  - id: mothur_make_shared
    environment: tpv_dispatcher
  - id: mothur_merge_files
    environment: tpv_dispatcher
  - id: mothur_pre_cluster
    environment: tpv_dispatcher
  - id: mothur_screen_seqs
    environment: tpv_dispatcher
  - id: mothur_summary_seqs
    environment: tpv_dispatcher
  - id: mothur_taxonomy_to_krona
    environment: tpv_dispatcher
  - id: mothur_unique_seqs
    environment: tpv_dispatcher
  - id: nanoplot
    environment: tpv_dispatcher
  - id: iuc_pear
    environment: tpv_dispatcher
  - id: pilon
    environment: tpv_dispatcher
  - id: porechop
    environment: tpv_dispatcher
  - id: poretools_events
    environment: tpv_dispatcher
  - id: poretools_extract
    environment: tpv_dispatcher
  - id: poretools_hist
    environment: tpv_dispatcher
  - id: poretools_nucdist
    environment: tpv_dispatcher
  - id: poretools_occupancy
    environment: tpv_dispatcher
  - id: poretools_qualdist
    environment: tpv_dispatcher
  - id: poretools_qualpos
    environment: tpv_dispatcher
  - id: poretools_squiggle
    environment: tpv_dispatcher
  - id: poretools_stats
    environment: tpv_dispatcher
  - id: poretools_tabular
    environment: tpv_dispatcher
  - id: poretools_times
    environment: tpv_dispatcher
  - id: poretools_winner
    environment: tpv_dispatcher
  - id: poretools_yield_plot
    environment: tpv_dispatcher
  - id: qualimap_bamqc
    environment: tpv_dispatcher
  - id: rna_starsolo
    environment: tpv_dispatcher
  - id: roary
    environment: tpv_dispatcher
  - id: scanpy_cluster_reduce_dimension
    environment: tpv_dispatcher
  - id: scanpy_filter
    environment: tpv_dispatcher
  - id: scanpy_inspect
    environment: tpv_dispatcher
  - id: scanpy_normalize
    environment: tpv_dispatcher
  - id: scanpy_remove_confounders
    environment: tpv_dispatcher
  - id: shovill
    environment: tpv_dispatcher
  - id: snpEff
    environment: tpv_dispatcher
  - id: snpSift_annotate
    environment: tpv_dispatcher
  - id: fasterq_dump
    environment: tpv_dispatcher
  - id: fastq_dump
    environment: tpv_dispatcher
  - id: sam_dump
    environment: tpv_dispatcher
  - id: stringtie
    environment: tpv_dispatcher
  - id: stringtie_merge
    environment: tpv_dispatcher
  - id: cutadapt
    environment: tpv_dispatcher
  - id: trimmomatic
    environment: tpv_dispatcher
  - id: krona-text
    environment: tpv_dispatcher
  - id: augustus
    environment: tpv_dispatcher
  - id: deeptools_plot_fingerprint
    environment: tpv_dispatcher
  - id: flye
    environment: tpv_dispatcher
  - id: racon
    environment: tpv_dispatcher
  - id: repeatmasker_wrapper
    environment: tpv_dispatcher
  - id: gmx_sim
    environment: tpv_dispatcher
  - id: prokka
    environment: tpv_dispatcher
  - id: bowtie2
    environment: tpv_dispatcher
  - id: bwameth
    environment: tpv_dispatcher
  - id: fastq_groomer
    environment: tpv_dispatcher
  - id: fastq_paired_end_deinterlacer
    environment: tpv_dispatcher
  - id: fastq_paired_end_interlacer
    environment: tpv_dispatcher
  - id: lastz_wrapper_2
    environment: tpv_dispatcher
  - id: samtools_rmdup
    environment: tpv_dispatcher
  - id: samtools_fixmate
    environment: frontera_small_2hr
  - id: samtools_markdup
    environment: tpv_dispatcher
  - id: abricate
    environment: tpv_dispatcher
  - id: circos
    environment: tpv_dispatcher
  - id: hisat2
    environment: tpv_dispatcher
  - id: hyphy_gard
    environment: tpv_dispatcher
  - id: ivar_consensus
    environment: tpv_dispatcher
  - id: ivar_trim
    environment: tpv_dispatcher
  - id: ivar_variants
    environment: tpv_dispatcher
  - id: khmer_abundance_distribution_single
    environment: tpv_dispatcher
  - id: lofreq_filter
    environment: tpv_dispatcher
  - id: lofreq_viterbi
    environment: tpv_dispatcher
  - id: medaka_consensus_pipeline
    environment: tpv_dispatcher
  - id: cshl_fastx_quality_statistics
    environment: tpv_dispatcher
  - id: medaka_variant
    environment: tpv_dispatcher
  - id: megahit
    environment: tpv_dispatcher
  - id: meryl
    environment: tpv_dispatcher
  - id: minimap2
    environment: tpv_dispatcher
  - id: rna_star
    environment: tpv_dispatcher
  - id: seqtk_seq
    environment: tpv_dispatcher
  - id: snippy
    environment: tpv_dispatcher
  - id: snippy_clean_full_aln
    environment: tpv_dispatcher
  - id: snippy_core
    environment: tpv_dispatcher
  - id: trinity
    environment: tpv_dispatcher
  - id: trinity_align_and_estimate_abundance
    environment: tpv_dispatcher
  - id: trinity_contig_exn50_statistic
    environment: tpv_dispatcher
  - id: trinity_abundance_estimates_to_matrix
    environment: tpv_dispatcher
  - id: trinity_gene_to_trans_map
    environment: tpv_dispatcher
  - id: trinity_run_de_analysis
    environment: tpv_dispatcher
  - id: trinity_samples_qccheck
    environment: tpv_dispatcher
  - id: trinity_super_transcripts
    environment: tpv_dispatcher
  - id: trinity_analyze_diff_expr
    environment: tpv_dispatcher
  - id: trinity_filter_low_expr_transcripts
    environment: tpv_dispatcher
  - id: describe_samples
    environment: tpv_dispatcher
  - id: trinity_define_clusters_by_cutting_tree
    environment: tpv_dispatcher
  - id: unicycler
    environment: tpv_dispatcher
  - id: htseq_count
    environment: tpv_dispatcher
  - id: rseqc_RPKM_saturation
    environment: tpv_dispatcher
  - id: rseqc_geneBody_coverage
    environment: tpv_dispatcher
  - id: rseqc_geneBody_coverage2
    environment: tpv_dispatcher
  - id: rseqc_read_distribution
    environment: tpv_dispatcher
  - id: metaspades
    environment: tpv_dispatcher
  - id: rbc_mafft
    environment: tpv_dispatcher
  - id: canu
    environment: tpv_dispatcher
  - id: hifiasm
    environment: tpv_dispatcher
  - id: busco
    environment: tpv_dispatcher
  - id: mothur_cluster_split
    environment: tpv_dispatcher
  - id: quast
    environment: tpv_dispatcher
  - id: spades
    environment: tpv_dispatcher
  - id: spades_rnaviralspades
    environment: tpv_dispatcher
  - id: rnaspades
    environment: tpv_dispatcher
  - id: spades_plasmidspades
    environment: tpv_dispatcher
  - id: spades_metaviralspades
    environment: tpv_dispatcher
  - id: spades_metaplasmidspades
    environment: tpv_dispatcher
  - id: spades_coronaspades
    environment: tpv_dispatcher
  - id: spades_biosyntheticspades
    environment: tpv_dispatcher
  - id: exonerate
    environment: tpv_dispatcher
  - id: peptide_shaker
    environment: tpv_dispatcher
  - id: vcffilter2
    environment: frontera_small_4hr
  - id: adapter_removal
    environment: tpv_dispatcher
  - id: aldex2
    environment: tpv_dispatcher
  - id: ancombc
    environment: tpv_dispatcher
  - id: obi_illumina_pairend
    environment: tpv_dispatcher
  - id: obi_grep
    environment: tpv_dispatcher
  - id: obi_ngsfilter
    environment: tpv_dispatcher
  - id: obi_annotate
    environment: tpv_dispatcher
  - id: obi_clean
    environment: tpv_dispatcher
  - id: obi_convert
    environment: tpv_dispatcher
  - id: obi_sort
    environment: tpv_dispatcher
  - id: obi_stat
    environment: tpv_dispatcher
  - id: obi_tab
    environment: tpv_dispatcher
  - id: obi_uniq
    environment: tpv_dispatcher
  - id: blastxml_to_tabular
    environment: tpv_dispatcher
  - id: ncbi_blastdbcmd_info
    environment: tpv_dispatcher
  - id: ncbi_blastdbcmd_wrapper
    environment: tpv_dispatcher
  - id: ncbi_convert2blastmask_wrapper
    environment: tpv_dispatcher
  - id: ncbi_dustmasker_wrapper
    environment: tpv_dispatcher
  - id: ncbi_makeprofiledb
    environment: tpv_dispatcher
  - id: ncbi_rpsblast_wrapper
    environment: tpv_dispatcher
  - id: ncbi_rpstblastn_wrapper
    environment: tpv_dispatcher
  - id: ncbi_segmasker_wrapper
    environment: tpv_dispatcher
  - id: bg_diamond
    environment: tpv_dispatcher
  - id: bg_diamond_makedb
    environment: tpv_dispatcher
  - id: bbtools_bbduk
    environment: tpv_dispatcher
  - id: bbtools_callvariants
    environment: tpv_dispatcher
  - id: bbtools_bbmap
    environment: tpv_dispatcher
  - id: flash
    environment: tpv_dispatcher
  - id: bedtools_annotatebed
    environment: tpv_dispatcher
  - id: bedtools_closestbed
    environment: tpv_dispatcher
  - id: bedtools_clusterbed
    environment: tpv_dispatcher
  - id: bedtools_complementbed
    environment: tpv_dispatcher
  - id: bedtools_coveragebed
    environment: tpv_dispatcher
  - id: bedtools_expandbed
    environment: tpv_dispatcher
  - id: bedtools_fisher
    environment: tpv_dispatcher
  - id: bedtools_flankbed
    environment: tpv_dispatcher
  - id: bedtools_genomecoveragebed
    environment: tpv_dispatcher
  - id: bedtools_getfastabed
    environment: tpv_dispatcher
  - id: bedtools_groupbybed
    environment: tpv_dispatcher
  - id: bedtools_intersectbed
    environment: tpv_dispatcher
  - id: bedtools_jaccard
    environment: tpv_dispatcher
  - id: bedtools_links
    environment: tpv_dispatcher
  - id: bedtools_makewindowsbed
    environment: tpv_dispatcher
  - id: bedtools_map
    environment: tpv_dispatcher
  - id: bedtools_maskfastabed
    environment: tpv_dispatcher
  - id: bedtools_mergebed
    environment: tpv_dispatcher
  - id: bedtools_multicovtbed
    environment: tpv_dispatcher
  - id: bedtools_multiintersectbed
    environment: tpv_dispatcher
  - id: bedtools_nucbed
    environment: tpv_dispatcher
  - id: bedtools_overlapbed
    environment: tpv_dispatcher
  - id: bedtools_randombed
    environment: tpv_dispatcher
  - id: bedtools_reldistbed
    environment: tpv_dispatcher
  - id: bedtools_shufflebed
    environment: tpv_dispatcher
  - id: bedtools_slopbed
    environment: tpv_dispatcher
  - id: bedtools_sortbed
    environment: tpv_dispatcher
  - id: bedtools_spacingbed
    environment: tpv_dispatcher
  - id: bedtools_subtractbed
    environment: tpv_dispatcher
  - id: bedtools_tagbed
    environment: tpv_dispatcher
  - id: bedtools_unionbedgraph
    environment: tpv_dispatcher
  - id: bedtools_windowbed
    environment: tpv_dispatcher
  - id: data_manager_dram_download
    environment: tpv_dispatcher
  - id: diamond_database_builder
    environment: tpv_dispatcher
  - id: megan_blast2lca
    environment: tpv_dispatcher
  - id: megan_blast2rma
    environment: tpv_dispatcher
  - id: megan_daa2info
    environment: tpv_dispatcher
  - id: megan_daa2rma
    environment: tpv_dispatcher
  - id: megan_daa_meganizer
    environment: tpv_dispatcher
  - id: megan_read_extractor
    environment: tpv_dispatcher
  - id: megan_sam2rma
    environment: tpv_dispatcher
  - id: sina
    environment: tpv_dispatcher
  - id: magicblast
    environment: tpv_dispatcher
  - id: concoct
    environment: tpv_dispatcher
  - id: malt_run
    environment: tpv_dispatcher
  - id: phyloseq_from_dada2
    environment: tpv_dispatcher
  - id: phyloseq_plot_richness
    environment: tpv_dispatcher
  - id: phyloseq_plot_ordination
    environment: tpv_dispatcher
  - id: bedtools_bamtobed
    environment: tpv_dispatcher
  - id: bedtools_bed12tobed6
    environment: tpv_dispatcher
  - id: bedtools_bedpetobam
    environment: tpv_dispatcher
  - id: bedtools_bedtobam
    environment: tpv_dispatcher
  - id: bedtools_bedtoigv
    environment: tpv_dispatcher
  - id: dada2_assignTaxonomyAddspecies
    environment: tpv_dispatcher
  - id: dada2_dada
    environment: tpv_dispatcher
  - id: dada2_learnErrors
    environment: tpv_dispatcher
  - id: qiime_align_seqs
    environment: tpv_dispatcher
  - id: qiime_alpha_diversity
    environment: tpv_dispatcher
  - id: qiime_alpha_rarefaction
    environment: tpv_dispatcher
  - id: qiime_assign_taxonomy
    environment: tpv_dispatcher
  - id: qiime_beta_diversity
    environment: tpv_dispatcher
  - id: qiime_beta_diversity_through_plots
    environment: tpv_dispatcher
  - id: qiime_collapse_samples
    environment: tpv_dispatcher
  - id: qiime_compare_categories
    environment: tpv_dispatcher
  - id: qiime_core_diversity
    environment: tpv_dispatcher
  - id: qiime_count_seqs
    environment: tpv_dispatcher
  - id: qiime_extract_barcodes
    environment: tpv_dispatcher
  - id: qiime_filter_alignment
    environment: tpv_dispatcher
  - id: qiime_filter_fasta
    environment: tpv_dispatcher
  - id: qiime_filter_otus_from_otu_table
    environment: tpv_dispatcher
  - id: qiime_filter_samples_from_otu_table
    environment: tpv_dispatcher
  - id: qiime_filter_taxa_from_otu_table
    environment: tpv_dispatcher
  - id: qiime_jackknifed_beta_diversity
    environment: tpv_dispatcher
  - id: qiime_make_emperor
    environment: tpv_dispatcher
  - id: qiime_make_otu_heatmap
    environment: tpv_dispatcher
  - id: qiime_make_otu_table
    environment: tpv_dispatcher
  - id: qiime_make_phylogeny
    environment: tpv_dispatcher
  - id: qiime_multiple_join_paired_ends
    environment: tpv_dispatcher
  - id: qiime_multiple_split_libraries_fastq
    environment: tpv_dispatcher
  - id: qiime_pick_closed_reference_otus
    environment: tpv_dispatcher
  - id: qiime_pick_open_reference_otus
    environment: tpv_dispatcher
  - id: qiime_pick_otus
    environment: tpv_dispatcher
  - id: qiime_pick_rep_set
    environment: tpv_dispatcher
  - id: qiime_plot_taxa_summary
    environment: tpv_dispatcher
  - id: qiime_split_libraries
    environment: tpv_dispatcher
  - id: qiime_split_libraries_fastq
    environment: tpv_dispatcher
  - id: qiime_summarize_taxa
    environment: tpv_dispatcher
  - id: qiime_summarize_taxa_through_plots
    environment: tpv_dispatcher
  - id: qiime_upgma_cluster
    environment: tpv_dispatcher
  - id: qiime_validate_mapping_file
    environment: tpv_dispatcher
  - id: qiime2__deblur__visualize_stats
    environment: tpv_dispatcher
  - id: qiime2__demux__emp_paired
    environment: tpv_dispatcher
  - id: qiime2__demux__emp_single
    environment: tpv_dispatcher
  - id: qiime2__demux__filter_samples
    environment: tpv_dispatcher
  - id: qiime2__demux__subsample_paired
    environment: tpv_dispatcher
  - id: qiime2__demux__subsample_single
    environment: tpv_dispatcher
  - id: qiime2__demux__summarize
    environment: tpv_dispatcher
  - id: qiime2__diversity__adonis
    environment: tpv_dispatcher
  - id: qiime2__diversity__alpha
    environment: tpv_dispatcher
  - id: qiime2__diversity__alpha_correlation
    environment: tpv_dispatcher
  - id: qiime2__diversity__alpha_group_significance
    environment: tpv_dispatcher
  - id: qiime2__diversity__alpha_phylogenetic
    environment: tpv_dispatcher
  - id: qiime2__diversity__alpha_rarefaction
    environment: tpv_dispatcher
  - id: qiime2__diversity__beta
    environment: tpv_dispatcher
  - id: qiime2__diversity__beta_correlation
    environment: tpv_dispatcher
  - id: qiime2__diversity__beta_group_significance
    environment: tpv_dispatcher
  - id: qiime2__diversity__beta_phylogenetic
    environment: tpv_dispatcher
  - id: qiime2__diversity__beta_rarefaction
    environment: tpv_dispatcher
  - id: qiime2__diversity__bioenv
    environment: tpv_dispatcher
  - id: qiime2__diversity__core_metrics
    environment: tpv_dispatcher
  - id: qiime2__diversity__core_metrics_phylogenetic
    environment: tpv_dispatcher
  - id: qiime2__diversity__filter_distance_matrix
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__alpha_passthrough
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__beta_passthrough
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__beta_phylogenetic_meta_passthrough
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__beta_phylogenetic_passthrough
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__bray_curtis
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__faith_pd
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__jaccard
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__observed_features
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__pielou_evenness
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__shannon_entropy
    environment: tpv_dispatcher
  - id: qiime2__diversity_lib__unweighted_unifrac
    environment: tpv_dispatcher
  - id: qiime2__diversity__mantel
    environment: tpv_dispatcher
  - id: qiime2__diversity__pcoa
    environment: tpv_dispatcher
  - id: qiime2__diversity__pcoa_biplot
    environment: tpv_dispatcher
  - id: qiime2__diversity__procrustes_analysis
    environment: tpv_dispatcher
  - id: qiime2__diversity__tsne
    environment: tpv_dispatcher
  - id: qiime2__diversity__umap
    environment: tpv_dispatcher
  - id: qiime2__emperor__biplot
    environment: tpv_dispatcher
  - id: qiime2__emperor__plot
    environment: tpv_dispatcher
  - id: qiime2__emperor__procrustes_plot
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__blast
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__classify_consensus_blast
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__classify_consensus_vsearch
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__classify_hybrid_vsearch_sklearn
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__classify_sklearn
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__extract_reads
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__find_consensus_annotation
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__fit_classifier_naive_bayes
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__fit_classifier_sklearn
    environment: tpv_dispatcher
  - id: qiime2__feature_classifier__vsearch_global
    environment: tpv_dispatcher
  - id: qiime2__feature_table__core_features
    environment: tpv_dispatcher
  - id: qiime2__feature_table__filter_features
    environment: tpv_dispatcher
  - id: qiime2__feature_table__filter_features_conditionally
    environment: tpv_dispatcher
  - id: qiime2__feature_table__filter_samples
    environment: tpv_dispatcher
  - id: qiime2__feature_table__filter_seqs
    environment: tpv_dispatcher
  - id: qiime2__feature_table__group
    environment: tpv_dispatcher
  - id: qiime2__feature_table__heatmap
    environment: tpv_dispatcher
  - id: qiime2__feature_table__merge
    environment: tpv_dispatcher
  - id: qiime2__feature_table__merge_seqs
    environment: tpv_dispatcher
  - id: qiime2__feature_table__merge_taxa
    environment: tpv_dispatcher
  - id: qiime2__feature_table__presence_absence
    environment: tpv_dispatcher
  - id: qiime2__feature_table__rarefy
    environment: tpv_dispatcher
  - id: qiime2__feature_table__relative_frequency
    environment: tpv_dispatcher
  - id: qiime2__feature_table__rename_ids
    environment: tpv_dispatcher
  - id: qiime2__feature_table__subsample
    environment: tpv_dispatcher
  - id: qiime2__feature_table__summarize
    environment: tpv_dispatcher
  - id: qiime2__feature_table__tabulate_seqs
    environment: tpv_dispatcher
  - id: qiime2__feature_table__transpose
    environment: tpv_dispatcher
  - id: qiime2__fragment_insertion__classify_otus_experimental
    environment: tpv_dispatcher
  - id: qiime2__fragment_insertion__filter_features
    environment: tpv_dispatcher
  - id: qiime2__fragment_insertion__sepp
    environment: tpv_dispatcher
  - id: qiime2__gneiss__assign_ids
    environment: tpv_dispatcher
  - id: qiime2__gneiss__correlation_clustering
    environment: tpv_dispatcher
  - id: qiime2__gneiss__dendrogram_heatmap
    environment: tpv_dispatcher
  - id: qiime2__gneiss__gradient_clustering
    environment: tpv_dispatcher
  - id: qiime2__gneiss__ilr_hierarchical
    environment: tpv_dispatcher
  - id: qiime2__gneiss__ilr_phylogenetic_differential
    environment: tpv_dispatcher
  - id: qiime2__gneiss__ilr_phylogenetic_ordination
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__anova
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__feature_volatility
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__first_differences
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__first_distances
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__linear_mixed_effects
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__maturity_index
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__nmit
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__pairwise_differences
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__pairwise_distances
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__plot_feature_volatility
    environment: tpv_dispatcher
  - id: qiime2__longitudinal__volatility
    environment: tpv_dispatcher
  - id: qiime2__metadata__distance_matrix
    environment: tpv_dispatcher
  - id: qiime2__metadata__shuffle_groups
    environment: tpv_dispatcher
  - id: qiime2__metadata__tabulate
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__align_to_tree_mafft_fasttree
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__align_to_tree_mafft_iqtree
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__align_to_tree_mafft_raxml
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__fasttree
    environment: tpv_dispatcher
  - id: qiime2__alignment__mafft
    environment: tpv_dispatcher
  - id: qiime2__alignment__mafft_add
    environment: tpv_dispatcher
  - id: qiime2__alignment__mask
    environment: tpv_dispatcher
  - id: qiime2__composition__add_pseudocount
    environment: tpv_dispatcher
  - id: qiime2__composition__ancom
    environment: tpv_dispatcher
  - id: qiime2_core__tools__export
    environment: tpv_dispatcher
  - id: qiime2_core__tools__import
    environment: tpv_dispatcher
  - id: qiime2__cutadapt__demux_paired
    environment: tpv_dispatcher
  - id: qiime2__cutadapt__demux_single
    environment: tpv_dispatcher
  - id: qiime2__cutadapt__trim_paired
    environment: tpv_dispatcher
  - id: qiime2__cutadapt__trim_single
    environment: tpv_dispatcher
  - id: qiime2__dada2__denoise_ccs
    environment: tpv_dispatcher
  - id: qiime2__dada2__denoise_paired
    environment: tpv_dispatcher
  - id: qiime2__dada2__denoise_pyro
    environment: tpv_dispatcher
  - id: qiime2__dada2__denoise_single
    environment: tpv_dispatcher
  - id: qiime2__deblur__denoise_16s
    environment: tpv_dispatcher
  - id: qiime2__deblur__denoise_other
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__filter_table
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__filter_tree
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__iqtree
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__iqtree_ultrafast_bootstrap
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__midpoint_root
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__raxml
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__raxml_rapid_bootstrap
    environment: tpv_dispatcher
  - id: qiime2__phylogeny__robinson_foulds
    environment: tpv_dispatcher
  - id: qiime2__quality_control__bowtie2_build
    environment: tpv_dispatcher
  - id: qiime2__quality_control__evaluate_composition
    environment: tpv_dispatcher
  - id: qiime2__quality_control__evaluate_seqs
    environment: tpv_dispatcher
  - id: qiime2__quality_control__evaluate_taxonomy
    environment: tpv_dispatcher
  - id: qiime2__quality_control__exclude_seqs
    environment: tpv_dispatcher
  - id: qiime2__quality_control__filter_reads
    environment: tpv_dispatcher
  - id: qiime2__quality_filter__q_score
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__classify_samples
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__classify_samples_from_dist
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__classify_samples_ncv
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__confusion_matrix
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__fit_classifier
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__fit_regressor
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__heatmap
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__metatable
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__predict_classification
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__predict_regression
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__regress_samples
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__regress_samples_ncv
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__scatterplot
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__split_table
    environment: tpv_dispatcher
  - id: qiime2__sample_classifier__summarize
    environment: tpv_dispatcher
  - id: qiime2__taxa__barplot
    environment: tpv_dispatcher
  - id: qiime2__taxa__collapse
    environment: tpv_dispatcher
  - id: qiime2__taxa__filter_seqs
    environment: tpv_dispatcher
  - id: qiime2__taxa__filter_table
    environment: tpv_dispatcher
  - id: qiime2__vsearch__cluster_features_closed_reference
    environment: tpv_dispatcher
  - id: qiime2__vsearch__cluster_features_de_novo
    environment: tpv_dispatcher
  - id: qiime2__vsearch__cluster_features_open_reference
    environment: tpv_dispatcher
  - id: qiime2__vsearch__dereplicate_sequences
    environment: tpv_dispatcher
  - id: qiime2__vsearch__fastq_stats
    environment: tpv_dispatcher
  - id: qiime2__vsearch__join_pairs
    environment: tpv_dispatcher
  - id: qiime2__vsearch__uchime_denovo
    environment: tpv_dispatcher
  - id: qiime2__vsearch__uchime_ref
    environment: tpv_dispatcher
  - id: qiime2__gneiss__ilr_phylogenetic
    environment: tpv_dispatcher
  - id: bwa_mem_index_builder_data_manager
    environment: tpv_dispatcher

limits:
  - type: registered_user_concurrent_jobs
    value: 20
  # Per-user limits on queued/running jobs per-environment
  - type: environment_user_concurrent_jobs
    id: multicore
    value: 4
  # Total limits on queued/running jobs across all users
  - type: environment_total_concurrent_jobs
    id: frontera_development
    value: 1
  # Actual Frontera limits are 50 running and 200 pending
  - type: environment_total_concurrent_jobs
    id: frontera_limit
    value: 50
